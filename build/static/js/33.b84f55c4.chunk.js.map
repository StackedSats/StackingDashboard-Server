{"version":3,"sources":["pages/Login.js"],"names":["loginSchema","joi","object","username","string","email","tlds","allow","Login","history","useHistory","useState","setusername","password","setpassword","error","setError","dispatch","useDispatch","login","a","validate","axios","url","process","data","method","loggingIn","status","localStorage","setItem","token","type","userDetails","payload","user","push","className","placeholder","onChange","e","target","value","onKeyDown","key","block","to","onClick","style","color"],"mappings":"sRAUMA,EAAcC,IAAIC,OAAO,CAC7BC,SAAUF,IAAIG,SAASC,MAAM,CAAEC,KAAM,CAAEC,OAAO,OAiHjCC,UA9Gf,WACE,IAAIC,EAAUC,cADC,EAEiBC,mBAAS,IAF1B,mBAERR,EAFQ,KAEES,EAFF,OAGiBD,mBAAS,IAH1B,mBAGRE,EAHQ,KAGEC,EAHF,OAIWH,oBAAS,GAJpB,mBAIRI,EAJQ,KAIDC,EAJC,KAKTC,EAAWC,cAeXC,EAAK,uCAAG,8BAAAC,EAAA,yDACZJ,GAAS,GADG,EAEMhB,EAAYqB,SAAS,CAAElB,cAF7B,EAEJY,MAFI,gBAIVC,GAAS,GAJC,uCAMcM,IAAM,CAC5BC,IAAI,GAAD,OAAKC,GAAL,UACHC,KAAM,CAAEtB,WAAUU,YAClBa,OAAQ,SATA,OAYe,OANnBC,EANI,QAYIC,QACZC,aAAaC,QAAQ,OAAQH,EAAUF,KAAKM,OAC5Cd,EAAS,CAAEe,KAAMC,IAAaC,QAASP,EAAUF,KAAKU,OACtD1B,EAAQ2B,KAAK,iBAEbpB,GAAS,GAjBD,4CAAH,qDAqBX,OACE,yBAAKqB,UAAU,kDACb,yBAAKA,UAAU,gFACb,0BAAMA,UAAU,gDACd,yBAAKA,UAAU,UACb,wBAAIA,UAAU,sCAAd,WACA,uBAAGA,UAAU,sBAAb,yCAGA,kBAAC,QAAD,KACE,uCACA,kBAAC,QAAD,CACEA,UAAU,uBACVL,KAAK,QACLM,YAAY,eACZC,SAjDK,SAACC,GAClB5B,EAAY4B,EAAEC,OAAOC,QAiDTA,MAAOvC,KAIX,kBAAC,QAAD,CAAOkC,UAAU,QACf,0CACA,kBAAC,QAAD,CACEA,UAAU,uBACVL,KAAK,WACLM,YAAY,kBACZC,SAxDK,SAACC,GAClB1B,EAAY0B,EAAEC,OAAOC,QAwDTA,MAAO7B,EACP8B,UAtDS,SAACH,GACR,UAAVA,EAAEI,KACJzB,QAwDM,yBACEkB,UAAU,wCACVQ,OAAK,EACLC,GAAG,oBACHC,QAAS5B,GAJX,UAQCJ,GAAS,uBAAGiC,MAAO,CAAEC,MAAO,QAAnB,6BACV,uBAAGZ,UAAU,QACX,kBAAC,IAAD,CACEA,UAAU,4CACVS,GAAG,oBAFL,0BAOF,uBAAGT,UAAU,QAAb,0BACA,kBAAC,IAAD,CACEA,UAAU,8EACVS,GAAG,mBAEH,0BAAMT,UAAU,QAAhB,WAJF,IAIwC,kBAAC,IAAD,OAExC,kBAAC,IAAD,CACEA,UAAU,sEACVS,GAAG,oBAFL","file":"static/js/33.b84f55c4.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { Label, Input } from \"@windmill/react-ui\";\nimport { FiArrowRight } from \"react-icons/fi\";\nimport { useDispatch } from \"react-redux\";\nimport { userDetails } from \"../redux/reducers\";\nimport { useHistory } from \"react-router-dom\";\nimport joi from \"joi\";\n\nconst loginSchema = joi.object({\n  username: joi.string().email({ tlds: { allow: false } }),\n});\n\nfunction Login() {\n  let history = useHistory();\n  const [username, setusername] = useState(\"\");\n  const [password, setpassword] = useState(\"\");\n  const [error, setError] = useState(false);\n  const dispatch = useDispatch();\n\n  const changeName = (e) => {\n    setusername(e.target.value);\n  };\n\n  const changePass = (e) => {\n    setpassword(e.target.value);\n  };\n\n  const _handleKeyDown = (e) => {\n    if (e.key === \"Enter\") {\n      login();\n    }\n  };\n  const login = async () => {\n    setError(false);\n    const { error } = loginSchema.validate({ username });\n    if (error) {\n      setError(true);\n    } else {\n      const loggingIn = await axios({\n        url: `${process.env.REACT_APP_BACKENDURL}/login`,\n        data: { username, password },\n        method: \"post\",\n      });\n\n      if (loggingIn.status === 200) {\n        localStorage.setItem(\"auth\", loggingIn.data.token);\n        dispatch({ type: userDetails, payload: loggingIn.data.user });\n        history.push(\"/app/network\");\n      } else {\n        setError(true);\n      }\n    }\n  };\n  return (\n    <div className=\"flex items-center min-h-screen p-6 bg-gray-900\">\n      <div className=\"flex-1 h-full max-w-md mx-auto overflow-hidden bg-white rounded-lg shadow-xl\">\n        <main className=\"flex items-center justify-center p-6 sm:p-12\">\n          <div className=\"w-full\">\n            <h1 className=\"text-3xl font-medium text-gray-700\">Welcome</h1>\n            <p className=\"mb-8 text-gray-300\">\n              Please Login to access your Dashboard\n            </p>\n            <Label>\n              <span>Email</span>\n              <Input\n                className=\"py-3 mt-1 bg-gray-50\"\n                type=\"email\"\n                placeholder=\"john@doe.com\"\n                onChange={changeName}\n                value={username}\n              />\n            </Label>\n\n            <Label className=\"mt-4\">\n              <span>Password</span>\n              <Input\n                className=\"py-3 mt-1 bg-gray-50\"\n                type=\"password\"\n                placeholder=\"***************\"\n                onChange={changePass}\n                value={password}\n                onKeyDown={_handleKeyDown}\n              />\n            </Label>\n\n            <div\n              className=\"mt-4 btn btn-primary btn-lg btn-block\"\n              block\n              to=\"/app/my-portfolio\"\n              onClick={login}\n            >\n              Log in\n            </div>\n            {error && <p style={{ color: \"red\" }}>Invalid Email or Password</p>}\n            <p className=\"mt-4\">\n              <Link\n                className=\"font-medium text-gray-300 hover:underline\"\n                to=\"/forgot-password\"\n              >\n                Forgot your password?\n              </Link>\n            </p>\n            <p className=\"mt-6\">Don't have an account?</p>\n            <Link\n              className=\"flex items-center mt-3 text-lg font-medium text-success-500 hover:underline\"\n              to=\"/create-account\"\n            >\n              <span className=\"mr-2\">Sign Up</span> <FiArrowRight />\n            </Link>\n            <Link\n              className=\"flex items-center mt-8 font-medium text-primary-500 hover:underline\"\n              to=\"/forgot-password\"\n            >\n              Forgot Password\n            </Link>\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n"],"sourceRoot":""}